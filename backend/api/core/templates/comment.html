{% extends "base.html" %}
{% load static %}

{% block title %}Index Page {% endblock %}

{% block content %}

<div class="d-flex justify-content-center align-items-center">
    <div class="card" style="width: 39rem; border-radius: 30px;margin:20px 0px 20px 0px;  overflow: hidden;background: linear-gradient(to right, #F9D1C4 0%, #9BBDDD 51%, #F9D1C4 100%);">
        <div class="card-body">
                <div class = "row top-aligned-row">
                    <div class = "col-2">
                        {% if post.user.profile and post.user.profile.pic %}
                            <img src="{{ post.user.profile.pic.url }}" alt="{{ post.user.username }}'s profile picture" class="user-pic">
                        {% else %}
                            <img src="{% static 'default.jpg' %}" class="user-pic" alt="{{ post.user.username }}'s profile picture" />
                        {% endif %}
                    </div>
                    <div class="col-10">
                        <h5 class="card-title">@{{ post.user.username }}</h5>
                        <p class="card-text">{{ post.content }}</p>
                    </div>
                </div>
                {% if post.image %}
                <img class="card-img-top mt-2" src="{{ post.image.url }}" alt="Post image" /><br><br>
                {% endif %}
                <h6 class="card-subtitle mb-2" style ="float: right;">{{ post.created_at|date:"M d, Y H:i" }}</h6>
                <br>
                <hr>
                <div class ="icons-list" >
                    <div class="feed" ><i class="far fa-thumbs-up" aria-hidden="true"> Likes</i></div>
                    <div class="feed"> <i class="far fa-comment" aria-hidden="true"> Comment</i> </div> 
                    <div class="feed"><i class="fa fa-retweet" aria-hidden="true"> Repost</i> </div>
                </div>
                <hr>
                <!-- Reply box -->
                <div class="row comment-section">       
                    <div class="col">
                        <div>
                            <form method="post" id="widget-form" class="widget-post__form" enctype="multipart/form-data" name="form" aria-label="post widget">
                                {% csrf_token %}
                                <div class="widget-post__content">
                                <textarea name="{{ form.content.name }}" id="post-content" class="widget-post__textarea scroller" placeholder="Post your reply...">{{ form.content.value|default:'' }}</textarea>
                                </div>
                                <div id="preview_image" style="display: none;">
                                    <button type="button" class="close" onclick="handleOnDeletePhotoClick()" style="color: #00001c;">&times;</button>
                                    <img class="card-img-top mb-2" src="#" />
                                </div>
                                <div class="widget-post__options is--hidden" id="stock-options">
                                </div>
                                <div class="widget-post__actions post--actions">
                                    <div class="post-actions__attachments">
                                        <label for="upload-image" class="post-actions__label" onclick="handleOnPhotoClick()">
                                        <i class="fa fa-camera" sty aria-hidden="true"></i> 
                                        Photo
                                        </label>
                                        {{ form.image }}
                                        &nbsp; &nbsp; &nbsp; &nbsp;
                
                                        <label for="upload-image" class="post-actions__label">
                                            <i class="fa fa-video" aria-hidden="true"></i> 
                                        Video
                                        </label>
                                    </div>
                                    <div class="post-actions__widget">
                                    <button type="submit" class="btn post-actions__publish">Reply</button>
                                    </div>
                                </div>
                            </form>
                        </div> 
                    </div>    
                </div>
                <!-- User replies -->
                <hr>
                {% for reply in replies %}
                <div class="grid-container">
                    <div class="user-profile">
                        {% if reply.user.profile and reply.user.profile.pic %}
                        <img src="{{ reply.user.profile.pic.url }}" class="user-pic" alt="{{ reply.user.username }}'s profile picture">
                        {% else %}
                        <img src="{% static 'default.jpg' %}" class="user-pic" alt="{{ reply.user.username }}'s profile picture" />
                        {% endif %}
                    </div>
                    <div class="tweet-content" style="flex-grow: 1;">
                       <h6 class="card-title">@{{ reply.user.username }}</h6>
                        <p class="card-text">{{ reply.content }}</p>
                        {% if reply.image %}
                        <img class="card-img-top mt-2" src="{{ reply.image.url }}" alt="reply image" />
                        {% endif %}
                    </div>
                    <div class="grid-item" >
                        <i class="far fa-thumbs-up" aria-hidden="true" ></i>&nbsp;&nbsp;&nbsp;
                        <a class="comment-link" href="{% url 'comment' post_id=reply.id %}"><i class="far fa-comment" aria-hidden="true"></i></a>
                    </div>
                </div>
                <hr>
                {% endfor %}
                
        </div>
    </div>
</div>
{% endblock %}